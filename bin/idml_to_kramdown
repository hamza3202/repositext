#!/usr/bin/env ruby

require 'kramdown/document'
require_relative '../lib/repositext/parser/idml'
require_relative '../lib/repositext/kramdown_adaptions'

idml_parser = Repositext::Parser::IDML.new(ARGV.shift)
$stderr.puts "Found #{idml_parser.story_names.size} stories: #{idml_parser.story_names.join(", ")}"
doc = idml_parser.parse(ARGV.empty? ? idml_parser.story_names : ARGV)
puts doc.to_kramdown
